
<!DOCTYPE html>




<html lang="en">
  <head>
    <meta charset="utf-8" />
    
    <title>Numba Roadmap &mdash; numba 0.9.0-133-g449e4d1 documentation</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    
<link rel="stylesheet" href="_static/css/basicstrap-base.css" type="text/css" />
<link rel="stylesheet" href="_static/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="_static/css/font-awesome.min.css">
<!--[if IE 7]>
<link rel="stylesheet" href="_static/css/font-awesome-ie7.min.css">
<![endif]-->
<style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
}
</style>
<link rel="stylesheet" href="_static/basicstrap.css" type="text/css" />
<link rel="stylesheet" href="_static/pygments.css" type="text/css" />
<link rel="stylesheet" href="_static/css/bootstrap-responsive.min.css" type="text/css" />
    
<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '',
            VERSION:     '0.9.0-133-g449e4d1',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="_static/js/jquery.min.js"></script>
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/javascript" src="_static/js/bootstrap.min.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $('.show-sidebar').click(function(e) {
       e.preventDefault();
       if ($(".show-sidebar").html() == "Open Table Of Contents") {
          $('.for-mobile').removeClass('hidden-phone');
          $(".show-sidebar").html("Close Table Of Contents");
       } else {
          $(".show-sidebar").html("Open Table Of Contents");
       }
    });
  });
</script>
    <link rel="top" title="numba 0.9.0-133-g449e4d1 documentation" href="index.html" />
    <link rel="next" title="Development crash course" href="dev.html" />
    <link rel="prev" title="Numba Intermediate Representation Specification" href="ir.html" /> 
  </head>
  <body>
    <div class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="index.html">numba 0.9.0-133-g449e4d1 documentation</a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-right">
              
                <li>
                <a href="genindex.html" title="General Index" accesskey="I">index</a>
                </li>
                <li>
                <a href="dev.html" title="Development crash course" accesskey="N">next</a>
                </li>
                <li>
                <a href="ir.html" title="Numba Intermediate Representation Specification" accesskey="P">previous</a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </div>
    

    <!-- container -->
    <div class="container-fluid">


      
      <div class="row-fluid hidden-desktop hidden-tablet">
      
<div class="span3 ">
  <a class="visible-phone btn btn-small show-sidebar" data-toggle="collapse" data-target=".for-mobile">Open Table Of Contents</a>
  <div class="for-mobile sidebar hidden-phone">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Numba Roadmap</a><ul>
<li><a class="reference internal" href="#numba-versions">Numba Versions</a><ul>
<li><a class="reference internal" href="#id1">1.0</a></li>
</ul>
</li>
<li><a class="reference internal" href="#thing-we-want">Thing we want</a></li>
<li><a class="reference internal" href="#less-intricate">Less intricate</a><ul>
<li><a class="reference internal" href="#numpy-type-inference">NumPy Type Inference</a></li>
<li><a class="reference internal" href="#typed-containers">Typed Containers</a></li>
<li><a class="reference internal" href="#intrinsics">Intrinsics</a></li>
<li><a class="reference internal" href="#source-annotator">Source Annotator</a></li>
<li><a class="reference internal" href="#numba-loader">Numba Loader</a></li>
<li><a class="reference internal" href="#jit-special-methods">JIT Special Methods</a></li>
<li><a class="reference internal" href="#array-expressions">Array Expressions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#more-intricate">More intricate</a><ul>
<li><a class="reference internal" href="#extension-types">Extension Types</a></li>
<li><a class="reference internal" href="#recursion">Recursion</a></li>
<li><a class="reference internal" href="#exceptions">Exceptions</a></li>
<li><a class="reference internal" href="#debug-info">Debug info</a></li>
<li><a class="reference internal" href="#struct-references">Struct references</a></li>
<li><a class="reference internal" href="#blaze">Blaze</a></li>
<li><a class="reference internal" href="#generators-parallel-tasks">Generators/parallel Tasks</a></li>
<li><a class="reference internal" href="#python-3-3-support">Python 3.3 support</a></li>
<li><a class="reference internal" href="#gpus">GPUs</a></li>
<li><a class="reference internal" href="#vector-support">Vector support</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ir.html"
                        title="previous chapter">Numba Intermediate Representation Specification</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dev.html"
                        title="next chapter">Development crash course</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/roadmap.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox">
  <h3>Quick search</h3>
  <form class="search form-search" action="search.html" method="get">
      <div class="input-append">
        <input type="text" class="search-query" name="q">
        <input type="submit" class="btn" value="Go" />
      </div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
  </div>
</div>
      </div>
      

      <!-- row -->
      <div class="row-fluid">
         
<div class="span3 visible-desktop visible-tablet">
  <div class=" sidebar hidden-phone">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Numba Roadmap</a><ul>
<li><a class="reference internal" href="#numba-versions">Numba Versions</a><ul>
<li><a class="reference internal" href="#id1">1.0</a></li>
</ul>
</li>
<li><a class="reference internal" href="#thing-we-want">Thing we want</a></li>
<li><a class="reference internal" href="#less-intricate">Less intricate</a><ul>
<li><a class="reference internal" href="#numpy-type-inference">NumPy Type Inference</a></li>
<li><a class="reference internal" href="#typed-containers">Typed Containers</a></li>
<li><a class="reference internal" href="#intrinsics">Intrinsics</a></li>
<li><a class="reference internal" href="#source-annotator">Source Annotator</a></li>
<li><a class="reference internal" href="#numba-loader">Numba Loader</a></li>
<li><a class="reference internal" href="#jit-special-methods">JIT Special Methods</a></li>
<li><a class="reference internal" href="#array-expressions">Array Expressions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#more-intricate">More intricate</a><ul>
<li><a class="reference internal" href="#extension-types">Extension Types</a></li>
<li><a class="reference internal" href="#recursion">Recursion</a></li>
<li><a class="reference internal" href="#exceptions">Exceptions</a></li>
<li><a class="reference internal" href="#debug-info">Debug info</a></li>
<li><a class="reference internal" href="#struct-references">Struct references</a></li>
<li><a class="reference internal" href="#blaze">Blaze</a></li>
<li><a class="reference internal" href="#generators-parallel-tasks">Generators/parallel Tasks</a></li>
<li><a class="reference internal" href="#python-3-3-support">Python 3.3 support</a></li>
<li><a class="reference internal" href="#gpus">GPUs</a></li>
<li><a class="reference internal" href="#vector-support">Vector support</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ir.html"
                        title="previous chapter">Numba Intermediate Representation Specification</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dev.html"
                        title="next chapter">Development crash course</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/roadmap.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox">
  <h3>Quick search</h3>
  <form class="search form-search" action="search.html" method="get">
      <div class="input-append">
        <input type="text" class="search-query" name="q">
        <input type="submit" class="btn" value="Go" />
      </div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
  </div>
</div> 
        

        <div class="span9">
          <div class="document">
            <div class="documentwrapper">
              <div class="bodywrapper">
                <div class="body">
                  
  <div class="section" id="numba-roadmap">
<span id="roadmap"></span><h1>Numba Roadmap<a class="headerlink" href="#numba-roadmap" title="Permalink to this headline">¶</a></h1>
<p>This document describes features we want in numba, but do not
have yet. We will first list what we want in upcoming versions,
and then what features we want in general. Those features can
always be added to the roadmap for upcoming versions if someone
is interested in implementing them.</p>
<div class="section" id="numba-versions">
<h2>Numba Versions<a class="headerlink" href="#numba-versions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>1.0<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>What we want for 1.0 is:</p>
<blockquote>
<div><ul>
<li><p class="first">Numba loader (<a class="reference internal" href="#loader">loader</a>)</p>
</li>
<li><p class="first">IR stages (<a href="#id2"><span class="problematic" id="id3">stages_</span></a>)</p>
</li>
<li><p class="first">More robust type inferencer</p>
</li>
<li><p class="first">Well-defined runtime</p>
<blockquote>
<div><ul class="simple">
<li>including exception support</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Debug info</p>
</li>
<li><p class="first">numba &#8211;annotate tool (<a class="reference internal" href="#annotate">annotate</a>)</p>
</li>
<li><p class="first">parallel tasks (green threads, typed channels, scheduler)</p>
</li>
<li><p class="first">generators on top of the green thread model</p>
</li>
</ul>
</div></blockquote>
<p>We also like some minimal Cython support, in addition to the longer
term goals of SEP 200. One idea from Zaur Shibzukhov is to provide
support for Cython pxd overlays:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># foo.py</span>

<span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">**</span> <span class="n">b</span>
</pre></div>
</div>
<p>Such a module can be overlain with a Cython pxd file, e.g.</p>
<div class="highlight-cython"><div class="highlight"><pre><span class="c"># foo.pxd</span>

<span class="k">cimport</span> <span class="nn">cython</span>

<span class="nd">@cython</span><span class="o">.</span><span class="n">locals</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="n">double</span><span class="p">)</span>
<span class="k">cpdef</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">double</span> <span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<p>For some inspiration of what we can do with pxd overlays, see also:
<a class="reference external" href="https://github.com/cython/cython/blob/master/Cython/Compiler/FlowControl.pxd">https://github.com/cython/cython/blob/master/Cython/Compiler/FlowControl.pxd</a></p>
<p>We can now compile <tt class="docutils literal"><span class="pre">foo.py</span></tt> with Cython. We should be able to similarly
compile <tt class="docutils literal"><span class="pre">foo.py</span></tt> with numba, using <tt class="docutils literal"><span class="pre">pycc</span></tt> as well as at runtime to produce
a new module with annotated functions compiled in the right order.</p>
</div>
</div>
<div class="section" id="thing-we-want">
<h2>Thing we want<a class="headerlink" href="#thing-we-want" title="Permalink to this headline">¶</a></h2>
<p>We will order these from less involved to more involved,
to provide different entry points to numba development.</p>
</div>
<div class="section" id="less-intricate">
<h2>Less intricate<a class="headerlink" href="#less-intricate" title="Permalink to this headline">¶</a></h2>
<p>Here as some less intricate topics, providing easier starting points
for new contributors:</p>
<div class="section" id="numpy-type-inference">
<h3>NumPy Type Inference<a class="headerlink" href="#numpy-type-inference" title="Permalink to this headline">¶</a></h3>
<p>Full/more support for type inference on NumPy functions:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://numba.pydata.org/numba-doc/dev/doc/type_inference.html">http://numba.pydata.org/numba-doc/dev/doc/type_inference.html</a></li>
<li><a class="reference external" href="https://github.com/numba/numba/tree/devel/numba/type_inference/modules">https://github.com/numba/numba/tree/devel/numba/type_inference/modules</a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="typed-containers">
<h3>Typed Containers<a class="headerlink" href="#typed-containers" title="Permalink to this headline">¶</a></h3>
<p>We currently have (naive implementations of):</p>
<blockquote>
<div><ul class="simple">
<li>typedlist  (<a class="reference external" href="https://github.com/numba/numba/blob/devel/numba/containers/typedlist.py">https://github.com/numba/numba/blob/devel/numba/containers/typedlist.py</a>)</li>
<li>typedtuple (<a class="reference external" href="https://github.com/numba/numba/blob/devel/numba/containers/typedtuple.py">https://github.com/numba/numba/blob/devel/numba/containers/typedtuple.py</a>)</li>
</ul>
</div></blockquote>
<p>But we want many more! Some ideas:</p>
<blockquote>
<div><ul>
<li><p class="first">typeddict</p>
</li>
<li><p class="first">typedset</p>
</li>
<li><p class="first">typedchannel</p>
<blockquote>
<div><ul class="simple">
<li>one thread-safe (nogil) and one requiring the GIL</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>Perhaps also the ordered variants of <tt class="docutils literal"><span class="pre">typeddict</span></tt> and <tt class="docutils literal"><span class="pre">typedset</span></tt>.</p>
</div>
<div class="section" id="intrinsics">
<h3>Intrinsics<a class="headerlink" href="#intrinsics" title="Permalink to this headline">¶</a></h3>
<p>Support for LLVM intrinsics (we only have instructions at the moment):</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://numba.pydata.org/numba-doc/dev/doc/interface_c.html#using-intrinsics">http://numba.pydata.org/numba-doc/dev/doc/interface_c.html#using-intrinsics</a></li>
<li><a class="reference external" href="https://github.com/numba/numba/blob/devel/numba/intrinsic/numba_intrinsic.py">https://github.com/numba/numba/blob/devel/numba/intrinsic/numba_intrinsic.py</a></li>
</ul>
</div></blockquote>
<p>E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">intrin</span> <span class="o">=</span> <span class="n">numba</span><span class="o">.</span><span class="n">declare_intrinsic</span><span class="p">(</span><span class="n">int64</span><span class="p">(),</span> <span class="s">&quot;llvm.readcyclecounter&quot;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">intrin</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="source-annotator">
<span id="annotate"></span><h3>Source Annotator<a class="headerlink" href="#source-annotator" title="Permalink to this headline">¶</a></h3>
<p>Analogous to <tt class="docutils literal"><span class="pre">cython</span> <span class="pre">--annotate</span></tt>, a tool that annotates numba source code
and finds and highlights which parts contain object calls. Ideally, this would
also include, for each source line (expand on click?):</p>
<blockquote>
<div><ul>
<li><p class="first">The final (unoptimized) LLVM bitcode</p>
<blockquote>
<div><ul class="simple">
<li>And optionally the optimized code and/or assembly</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Code from intermediate numba representations</p>
<blockquote>
<div><ul class="simple">
<li>After we start implementing several layers of IR,
see <a class="reference external" href="http://numba.pydata.org/numba-doc/dev/doc/ir.html">http://numba.pydata.org/numba-doc/dev/doc/ir.html</a></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">The type of each sub-expression and variable (on hover?)</p>
</li>
</ul>
</div></blockquote>
<p>Issue: <a class="reference external" href="https://github.com/numba/numba/issues/105">https://github.com/numba/numba/issues/105</a></p>
</div>
<div class="section" id="numba-loader">
<span id="loader"></span><h3>Numba Loader<a class="headerlink" href="#numba-loader" title="Permalink to this headline">¶</a></h3>
<p>Allow two forms of code caching:</p>
<blockquote>
<div><ul class="simple">
<li>For distribution (portable IR)</li>
<li>Locally on disk (unportable compiled binaries)</li>
</ul>
</div></blockquote>
<p>The first bullet will allow library writers to distribute
numba code while not being tied to numba versions that users
have installed. This would be similar to distribution of
C code compiled from Cython source:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>numba --compile foo.py
Writing foo.numba
</pre></div>
</div>
<p>We can now distribute <tt class="docutils literal"><span class="pre">foo.numba</span></tt>.
Load code explicitly:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="n">foo</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;foo.numba&quot;</span><span class="p">)</span>
<span class="n">foo</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>
</pre></div>
</div>
<p>... or use an import hook:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="n">loader</span><span class="o">.</span><span class="n">install_hook</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">foo</span>
<span class="n">foo</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>
</pre></div>
</div>
<p>... or compile to extension modules during setup:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">numba.loader</span> <span class="kn">import</span> <span class="n">NumbaExtension</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">ext_modules</span><span class="o">=</span><span class="p">[</span>
        <span class="n">NumbaExtension</span><span class="p">(</span><span class="s">&quot;foo.bar&quot;</span><span class="p">,</span>
                       <span class="n">sources</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;foo/bar.numba&quot;</span><span class="p">]),</span>
        <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Or perhaps more conveniently, implement <tt class="docutils literal"><span class="pre">find_numba_modules()</span></tt>
to find all <tt class="docutils literal"><span class="pre">*.numba</span></tt> source files and return a list of
<tt class="docutils literal"><span class="pre">NumbaExtension</span></tt>.</p>
<p>This also plays into the IR discussion found here:
<a class="reference external" href="http://numba.pydata.org/numba-doc/dev/doc/ir.html">http://numba.pydata.org/numba-doc/dev/doc/ir.html</a></p>
</div>
<div class="section" id="jit-special-methods">
<h3>JIT Special Methods<a class="headerlink" href="#jit-special-methods" title="Permalink to this headline">¶</a></h3>
<p>Jit operations that result in calls to special methods like <tt class="docutils literal"><span class="pre">__len__</span></tt>,
<tt class="docutils literal"><span class="pre">__getitem__</span></tt>, etc. This requires some careful thought as to the stage where
this transformation should take place.</p>
</div>
<div class="section" id="array-expressions">
<h3>Array Expressions<a class="headerlink" href="#array-expressions" title="Permalink to this headline">¶</a></h3>
<p>Array Expression support in Numba, including scans, reductions, etc.
Or maybe we should make Blaze a hard dependency for that?</p>
</div>
</div>
<div class="section" id="more-intricate">
<h2>More intricate<a class="headerlink" href="#more-intricate" title="Permalink to this headline">¶</a></h2>
<p>More intricate topics, in no particular order:</p>
<div class="section" id="extension-types">
<h3>Extension Types<a class="headerlink" href="#extension-types" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support autojit class inheritance</li>
<li>Support partial method specialization</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@Any</span><span class="p">(</span><span class="n">int_</span><span class="p">,</span> <span class="n">Any</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Infer the return type and specialize on parameter type <tt class="docutils literal"><span class="pre">b</span></tt>, but
fix parameter type <tt class="docutils literal"><span class="pre">a</span></tt>.</p>
<ul class="simple">
<li>Allow annotation of pure-python only methods (don&#8217;t compile)</li>
</ul>
<p>What we also need is native dispatch of foreign callables, in a
sustainable way: SEP 200 and SEP 201</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://github.com/numfocus/sep/">https://github.com/numfocus/sep/</a></li>
<li>Widen support in scientific community</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="recursion">
<h3>Recursion<a class="headerlink" href="#recursion" title="Permalink to this headline">¶</a></h3>
<p>Support recursion for autojit functions and methods:</p>
<blockquote>
<div><ul>
<li><p class="first">Construct call graph</p>
</li>
<li><p class="first">Build condensation graph and resolve</p>
<blockquote>
<div><ul class="simple">
<li>similar to cycles in SSA</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="exceptions">
<h3>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h3>
<p>Support for zero-cost exceptions: support in the runtime libraries for
all models:</p>
<blockquote>
<div><ul>
<li><p class="first">True zero-cost exceptions</p>
<blockquote>
<div><ul class="simple">
<li>Stack trace through libunwind/apple backtrace/LLVM info
based on instruction pointer</li>
<li><a class="reference external" href="http://llvm.org/docs/LangRef.html#invoke-instruction">http://llvm.org/docs/LangRef.html#invoke-instruction</a></li>
<li><a class="reference external" href="http://llvm.org/docs/ExceptionHandling.html">http://llvm.org/docs/ExceptionHandling.html</a></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Setjmp/longjmp</p>
<blockquote>
<div><ul class="simple">
<li>Optionally with exception analysis to allow cheap cleanup for
the simpler cases</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Costful exceptions</p>
<blockquote>
<div><ul class="simple">
<li>&#8220;return -1&#8221;</li>
<li>Implement fast <tt class="docutils literal"><span class="pre">NumbaErr_Occurred()</span></tt> or change calling
convention for native or void returns</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>We also need to allow users to take the pointer to a numba <tt class="docutils literal"><span class="pre">jit</span></tt>
function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">numba</span><span class="o">.</span><span class="n">addressof</span><span class="p">(</span><span class="n">my_numba_function</span><span class="p">)</span>
</pre></div>
</div>
<p>We can allow specifying an exception model:</p>
<blockquote>
<div><ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">propagate=False</span></tt>: This does not propagate, but uses
PyErr_WriteUnraisable</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">propagate=True</span></tt>: Implies <tt class="docutils literal"><span class="pre">write_unraisable=False</span></tt>. Callers
check with <tt class="docutils literal"><span class="pre">NumbaErr_Occurred()</span></tt> (or for NULL if object return).
Maybe also specify a range of badvals:</p>
<blockquote>
<div><ul class="simple">
<li>int -&gt; 0xdeadbeef (<tt class="docutils literal"><span class="pre">ret</span> <span class="pre">==</span> <span class="pre">0xdeadbeef</span> <span class="pre">&amp;&amp;</span> <span class="pre">NumbaErr_Occurred()</span></tt>)</li>
<li>float -&gt; float(&#8216;nan&#8217;) (<tt class="docutils literal"><span class="pre">ret</span> <span class="pre">!=</span> <span class="pre">ret</span> <span class="pre">&amp;&amp;</span> <span class="pre">NumbaErr_Occurred()</span></tt>)</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We have <tt class="docutils literal"><span class="pre">numba.addressof()</span></tt>, but we don&#8217;t have <tt class="docutils literal"><span class="pre">NumbaErr_Occurred()</span></tt>
yet.</p>
</div>
</div>
<div class="section" id="debug-info">
<h3>Debug info<a class="headerlink" href="#debug-info" title="Permalink to this headline">¶</a></h3>
<p>GDB Backtraces!</p>
<p>See:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://github.com/llvmpy/llvmpy/blob/debuginfo/llvm/debuginfo.py">https://github.com/llvmpy/llvmpy/blob/debuginfo/llvm/debuginfo.py</a></li>
<li><a class="reference external" href="https://github.com/llvmpy/llvmpy/blob/debuginfo/test/test_debuginfo.py">https://github.com/llvmpy/llvmpy/blob/debuginfo/test/test_debuginfo.py</a></li>
</ul>
</div></blockquote>
<p>Or is there a successor to that?</p>
</div>
<div class="section" id="struct-references">
<h3>Struct references<a class="headerlink" href="#struct-references" title="Permalink to this headline">¶</a></h3>
<p>Use cheap heap allocated objects + garbage collection?</p>
<blockquote>
<div><ul class="simple">
<li>or atomic reference counts?</li>
</ul>
</div></blockquote>
<p>Use stack-allocation + escape analysis?</p>
</div>
<div class="section" id="blaze">
<h3>Blaze<a class="headerlink" href="#blaze" title="Permalink to this headline">¶</a></h3>
<p>Blaze support:</p>
<blockquote>
<div><ul class="simple">
<li>compile abstract blaze expressions into kernels</li>
<li>generate native call to blaze kernel</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="generators-parallel-tasks">
<h3>Generators/parallel Tasks<a class="headerlink" href="#generators-parallel-tasks" title="Permalink to this headline">¶</a></h3>
<p>Support for generators based on green threading support:</p>
<blockquote>
<div><ul class="simple">
<li>Write typed channels as autojit class</li>
<li>Support green thread context switching</li>
<li>Rewrite iteration over generators</li>
</ul>
</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">f</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>      <span class="c"># write to channel (triggering a context switch)</span>

<span class="k">def</span> <span class="nf">consume</span><span class="p">():</span>
    <span class="n">gen</span> <span class="o">=</span> <span class="n">g</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>        <span class="c"># create task with bound parameter N and channel C</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">:</span>       <span class="c"># read from C until exhaustion</span>
        <span class="n">use</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>See also
<a class="reference external" href="https://groups.google.com/a/continuum.io/forum/#!searchin/numba-users/generators/numba-users/gaVgArRrXqw/HTyTzaXsW_EJ">https://groups.google.com/a/continuum.io/forum/#!searchin/numba-users/generators/numba-users/gaVgArRrXqw/HTyTzaXsW_EJ</a>
for how this compares to generators based on closures.</p>
</div>
<div class="section" id="python-3-3-support">
<h3>Python 3.3 support<a class="headerlink" href="#python-3-3-support" title="Permalink to this headline">¶</a></h3>
<p>We support Python 3.3, but we can additionally support type-annotations:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">int_</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">float_</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">double</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Maybe this can work with numba.automodule(my_numba_module) as well as with
jit and autojit methods.</p>
</div>
<div class="section" id="gpus">
<h3>GPUs<a class="headerlink" href="#gpus" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>SPIR support (OpenCL)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="vector-support">
<h3>Vector support<a class="headerlink" href="#vector-support" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul>
<li><p class="first">Vector-types in Numba</p>
<blockquote>
<div><ul class="simple">
<li>What does this look like?</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
</div>
</div>


                </div>
              </div>
            </div>
          </div>
        </div>
        
        
      </div><!-- /row -->

      <!-- row -->
      <div class="row-fluid">
<div class="related navbar ">
  <div class="navbar-inner">
    <ul class="nav pull-right">
      
        <li><a href="genindex.html" title="General Index" >index</a></li>
        <li><a href="dev.html" title="Development crash course" >next</a></li>
        <li><a href="ir.html" title="Numba Intermediate Representation Specification" >previous</a></li>
        <li><a href="index.html">numba 0.9.0-133-g449e4d1 documentation</a></li> 
      
    </ul>
  </div>
</div>
      </div><!-- /row -->

      <!-- footer -->
      <footer>
          &copy; Copyright 2012-2013, Continuum Analytics.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
      </footer>
      <!-- /footer -->

    </div>
    <!-- /container -->

  </body>
</html>