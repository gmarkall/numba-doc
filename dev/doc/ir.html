
<!DOCTYPE html>




<html lang="en">
  <head>
    <meta charset="utf-8" />
    
    <title>Numba IR Stages &mdash; numba 0.7.1-265-gf9fdf42-dirty documentation</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    
<link rel="stylesheet" href="../_static/css/basicstrap-base.css" type="text/css" />
<link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="../_static/css/font-awesome.min.css">
<!--[if IE 7]>
<link rel="stylesheet" href="../_static/css/font-awesome-ie7.min.css">
<![endif]-->
<style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
}
</style>
<link rel="stylesheet" href="../_static/basicstrap.css" type="text/css" />
<link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
<link rel="stylesheet" href="../_static/css/bootstrap-responsive.min.css" type="text/css" />
    
<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../',
            VERSION:     '0.7.1-265-gf9fdf42-dirty',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="../_static/js/jquery.min.js"></script>
<script type="text/javascript" src="../_static/underscore.js"></script>
<script type="text/javascript" src="../_static/doctools.js"></script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/javascript" src="../_static/js/bootstrap.min.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $('.show-sidebar').click(function(e) {
       e.preventDefault();
       if ($(".show-sidebar").html() == "Open Table Of Contents") {
          $('.for-mobile').removeClass('hidden-phone');
          $(".show-sidebar").html("Close Table Of Contents");
       } else {
          $(".show-sidebar").html("Open Table Of Contents");
       }
    });
  });
</script>
    <link rel="top" title="numba 0.7.1-265-gf9fdf42-dirty documentation" href="../index.html" />
    <link rel="next" title="Numba Module Reference" href="reference.html" />
    <link rel="prev" title="Numba Architecture" href="architecture.html" /> 
  </head>
  <body>
    <div class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">numba 0.7.1-265-gf9fdf42-dirty documentation</a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-right">
              
                <li>
                <a href="../genindex.html" title="General Index" accesskey="I">index</a>
                </li>
                <li>
                <a href="../py-modindex.html" title="Python Module Index" >modules</a>
                </li>
                <li>
                <a href="reference.html" title="Numba Module Reference" accesskey="N">next</a>
                </li>
                <li>
                <a href="architecture.html" title="Numba Architecture" accesskey="P">previous</a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </div>
    

    <!-- container -->
    <div class="container-fluid">


      
      <div class="row-fluid hidden-desktop hidden-tablet">
      
<div class="span3 ">
  <a class="visible-phone btn btn-small show-sidebar" data-toggle="collapse" data-target=".for-mobile">Open Table Of Contents</a>
  <div class="for-mobile sidebar hidden-phone">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Numba IR Stages</a><ul>
<li><a class="reference internal" href="#intermediate-representations">Intermediate Representations</a><ul>
<li><a class="reference internal" href="#use-of-schemas">Use of Schemas</a></li>
<li><a class="reference internal" href="#initial-python-like-ir">Initial Python-like IR</a></li>
<li><a class="reference internal" href="#untyped-ir-in-ssa-form">Untyped IR in SSA form</a></li>
<li><a class="reference internal" href="#typed-ir-in-ssa-form">Typed IR in SSA form</a></li>
</ul>
</li>
<li><a class="reference internal" href="#low-level-portable-ir">Low-level Portable IR</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="architecture.html"
                        title="previous chapter">Numba Architecture</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="reference.html"
                        title="next chapter">Numba Module Reference</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/doc/ir.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox">
  <h3>Quick search</h3>
  <form class="search form-search" action="../search.html" method="get">
      <div class="input-append">
        <input type="text" class="search-query" name="q">
        <input type="submit" class="btn" value="Go" />
      </div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
  </div>
</div>
      </div>
      

      <!-- row -->
      <div class="row-fluid">
         
<div class="span3 visible-desktop visible-tablet">
  <div class=" sidebar hidden-phone">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Numba IR Stages</a><ul>
<li><a class="reference internal" href="#intermediate-representations">Intermediate Representations</a><ul>
<li><a class="reference internal" href="#use-of-schemas">Use of Schemas</a></li>
<li><a class="reference internal" href="#initial-python-like-ir">Initial Python-like IR</a></li>
<li><a class="reference internal" href="#untyped-ir-in-ssa-form">Untyped IR in SSA form</a></li>
<li><a class="reference internal" href="#typed-ir-in-ssa-form">Typed IR in SSA form</a></li>
</ul>
</li>
<li><a class="reference internal" href="#low-level-portable-ir">Low-level Portable IR</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="architecture.html"
                        title="previous chapter">Numba Architecture</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="reference.html"
                        title="next chapter">Numba Module Reference</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/doc/ir.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox">
  <h3>Quick search</h3>
  <form class="search form-search" action="../search.html" method="get">
      <div class="input-append">
        <input type="text" class="search-query" name="q">
        <input type="submit" class="btn" value="Go" />
      </div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
  </div>
</div> 
        

        <div class="span9">
          <div class="document">
            <div class="documentwrapper">
              <div class="bodywrapper">
                <div class="body">
                  
  <div class="section" id="numba-ir-stages">
<h1>Numba IR Stages<a class="headerlink" href="#numba-ir-stages" title="Permalink to this headline">¶</a></h1>
<p>To allow Numba as a general purpose compiler, we provide different entry
points. These entry points also allow for further decoupling of the Numba
architecture. We propose three new Intermediate Representations (IRs),
from high-level to low-level:</p>
<blockquote>
<div><ul class="simple">
<li>The Python AST IR (input to a numba frontend)</li>
<li>Initial Python-like IR</li>
<li>Untyped IR in SSA form</li>
<li>Typed IR in SSA form</li>
<li>Low-level IR in SSA form</li>
<li>Final LLVM IR, the final input for LLVM. This IR is unportable
since the sizes of types are fixed.</li>
</ul>
</div></blockquote>
<p>All IRs except the last are portable across machine architectures.</p>
<div class="section" id="intermediate-representations">
<h2>Intermediate Representations<a class="headerlink" href="#intermediate-representations" title="Permalink to this headline">¶</a></h2>
<p>Each IR consists of two layers, namely a higher-level Abstract Syntax Tree
encoding, specified, verified and generated by our variant of ASDL
schemas. We add the symbol <tt class="docutils literal"><span class="pre">&#64;</span></tt> to signal that the given type
is to be treated as a &#8220;unique&#8221; object, i.e. one that compares by identity
as opposed to structural equality. These objects each carry a unique id
and are serialized in a table (and they may participate in circular
references, i.e. in a graph):</p>
<p>Serialization to LLVM IR (or a direct textual serialization) will
consist of something like a generated table, e.g.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mod</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&quot;foo = @Foo(str name, foo attr)&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">foo1</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">Foo</span><span class="p">(</span><span class="s">&quot;foo1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo2</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">Foo</span><span class="p">(</span><span class="s">&quot;foo2&quot;</span><span class="p">,</span> <span class="n">foo1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo1</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="n">foo2</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">foo1</span>
<span class="go">Foo(name=&quot;foo1&quot;, attr=Foo(&quot;foo2&quot;, Foo(name=&quot;foo1&quot;, attr=...)))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">build_llvm_ir</span><span class="p">(</span><span class="n">foo1</span><span class="p">)</span>   <span class="c"># name,  id,    attr</span>
<span class="go">!0 = metadata !{ metadata !&quot;foo1&quot;, i64 0, i64 1 }</span>
<span class="go">!1 = metadata !{ metadata !&quot;foo2&quot;, i64 1, i64 0 }</span>
</pre></div>
</div>
<p>Attributes may also be hidden using <tt class="docutils literal"><span class="pre">\</span></tt>, which means the attribute
is not considered a child for the purposes of visitors or term
rewrites:</p>
<div class="highlight-python"><pre>foo = @Foo(str name, foo \attr)</pre>
</div>
<div class="section" id="use-of-schemas">
<h3>Use of Schemas<a class="headerlink" href="#use-of-schemas" title="Permalink to this headline">¶</a></h3>
<p>We can use our schemas to generate Python AST classes, which can
also verify the typing (using <tt class="docutils literal"><span class="pre">TypedProperty</span></tt>). Each node can
furthermore implement its own <tt class="docutils literal"><span class="pre">visit</span></tt> method, allowing for quick
visitor dispatch (compile with Cython or pre-compile with Numba).</p>
<p>We can generate automatic mapping code to map schema instances to
opaguely typed LLVM IR automatically, which is the abstract syntax
generated post-order. E.g. <tt class="docutils literal"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span> <span class="pre">*</span> <span class="pre">c</span></tt> becomes:</p>
<div class="highlight-llvm"><pre>!0 = metadata !{ metadata !"operator", i8* "Mul" }
!1 = metadata !{ metadata !"operator", i8* "Add" }

define i8* some_func(i8* %a, i8* %b, i8* %c) {
entry:
  %0 = call i8* @numba.ir.BinOp(%b, metadata !{0}, %c)
  %1 = call i8* @numba.ir.BinOp(%a, metadata !{1}, %0)
  ret %1
}</pre>
</div>
<p>The LLVM IR contains the high-level block structure, i.e. an <tt class="docutils literal"><span class="pre">if</span></tt> statement
will generate IR along the following lines:</p>
<div class="highlight-llvm"><pre>define i8* @func() {
    %0 = blockaddress(@func, %bb_true)
    %1 = blockaddress(@func, %bb_false)
    %2 = i8*  @If(i8* %0, i8* %1)

  "bb_true":
    ...

  "bb_false":
    ...
}</pre>
</div>
<p>Other things we can do from our schema:</p>
<blockquote>
<div><ul>
<li><p class="first">Generate conversion code to and from JSON or XML</p>
</li>
<li><p class="first">Generate conversion code to and from an ATerm representation</p>
</li>
<li><p class="first">Generate an implementation in other languages that can load a
serialized representation and construct an AST in that langauge</p>
</li>
<li><p class="first">Travis&#8217; idea, make the IR executable.</p>
<blockquote>
<div><ul>
<li><p class="first">Implement a library to which the generated abstract
LLVM IR can link.
E.g. implement functions such as <tt class="docutils literal"><span class="pre">&#64;BinOp(%lhs,</span> <span class="pre">%rhs)</span></tt>.</p>
</li>
<li><p class="first">Generate conversion code to and from a high-level Python AST
or source code.</p>
<p>For instance, <tt class="docutils literal"><span class="pre">PointerIndex(base_type,</span> <span class="pre">node,</span> <span class="pre">index)</span></tt> becomes
<tt class="docutils literal"><span class="pre">Call(func=Name('base_type'),</span> <span class="pre">args=[Subscript(subnode,</span> <span class="pre">index)])</span></tt>.
This function can then be compiled and interpreted with Python,
using abstract argument inputs (or maybe we can write a
simple AST evaluator).</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="initial-python-like-ir">
<h3>Initial Python-like IR<a class="headerlink" href="#initial-python-like-ir" title="Permalink to this headline">¶</a></h3>
<p>The initial, Python-like, IR is a subset of a Python AST, the
syntax exludes:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">FunctionDef</span></tt> and <tt class="docutils literal"><span class="pre">ClassDef</span></tt>, which are normalized
to <tt class="docutils literal"><span class="pre">Assign</span></tt> of the function and subsequent
decorator applications and assignments</li>
<li>No list, dict, set or generators comprehensions, which are
normalized to <tt class="docutils literal"><span class="pre">For(...)</span></tt> etc + method calls</li>
</ul>
</div></blockquote>
<p>The initial IR is what numba decorators produce given a pure
Python AST, function or class as input.</p>
<p>Sample schema</p>
<div class="highlight-ocaml"><div class="highlight"><pre><span class="k">module</span> <span class="n">initial</span> <span class="o">{</span>

    <span class="ow">mod</span> <span class="o">=</span> <span class="nc">NumbaModule</span><span class="o">(</span><span class="kt">unit</span><span class="o">*</span> <span class="n">stats</span><span class="o">)</span>

    <span class="kt">unit</span>
      <span class="o">=</span> <span class="n">lambda</span>
      <span class="o">|</span> <span class="k">class</span>

    <span class="o">--</span> <span class="n">functions</span> <span class="o">--</span>
    <span class="n">lambda</span>
      <span class="o">=</span> <span class="nc">Lambda</span><span class="o">(</span><span class="n">posinfo</span> <span class="n">pos</span><span class="o">,</span> <span class="n">funcmeta</span> <span class="n">meta</span><span class="o">,</span> <span class="n">str</span> <span class="n">name</span><span class="o">,</span> <span class="n">arguments</span> <span class="n">args</span><span class="o">,</span>
               <span class="n">expr</span> <span class="n">body</span><span class="o">)</span>

    <span class="n">funcmeta</span>
      <span class="o">=</span> <span class="nc">FunctionMetaData</span><span class="o">(</span>
            <span class="o">--</span> <span class="n">locals</span><span class="o">={</span><span class="k">&#39;</span><span class="n">foo&#39;</span><span class="o">:</span> <span class="n">double</span><span class="o">}</span>
            <span class="n">str</span><span class="o">*</span> <span class="n">names</span><span class="o">,</span>     <span class="o">--</span> <span class="k">&#39;</span><span class="n">foo&#39;</span>
            <span class="n">nbtype</span><span class="o">*</span> <span class="n">types</span><span class="o">,</span>  <span class="o">--</span> <span class="n">double</span>
            <span class="kt">bool</span> <span class="n">nopython</span><span class="o">,</span>
        <span class="o">)</span>

    <span class="o">--</span> <span class="n">classes</span> <span class="o">--</span>
    <span class="k">class</span>
      <span class="o">=</span> <span class="nc">ClassExpr</span><span class="o">(</span><span class="n">posinfo</span> <span class="n">pos</span><span class="o">,</span> <span class="kt">bool</span> <span class="n">is_jit</span><span class="o">,</span> <span class="n">attrtable</span> <span class="n">table</span><span class="o">,</span> <span class="k">method</span><span class="o">*</span> <span class="n">methods</span><span class="o">)</span>

    <span class="n">attrtable</span>
      <span class="o">=</span> <span class="nc">AttributeTable</span><span class="o">(</span><span class="n">str</span><span class="o">*</span> <span class="n">attrnames</span><span class="o">,</span> <span class="n">nbtype</span><span class="o">*</span> <span class="n">attrtypes</span><span class="o">)</span>

    <span class="k">method</span>
      <span class="o">=</span> <span class="nc">Method</span><span class="o">(</span><span class="n">posinfo</span> <span class="n">pos</span><span class="o">,</span> <span class="n">methodsignature</span> <span class="n">signature</span><span class="o">,</span> <span class="n">stat</span><span class="o">*</span> <span class="n">body</span><span class="o">)</span>

    <span class="o">--</span> <span class="nc">Types</span> <span class="o">--</span>

    <span class="k">type</span> <span class="o">=</span> <span class="n">nbtype</span>
    <span class="n">nbtype</span>
      <span class="o">=</span> <span class="kt">char</span> <span class="o">|</span> <span class="n">short</span> <span class="o">|</span> <span class="n">int_</span> <span class="o">|</span> <span class="n">long_</span> <span class="o">|</span> <span class="n">longlong</span>
      <span class="o">|</span> <span class="n">uchar</span> <span class="o">|</span> <span class="n">ushort</span> <span class="o">|</span> <span class="n">uint</span> <span class="o">|</span> <span class="n">ulong</span> <span class="o">|</span> <span class="n">ulonglong</span>
      <span class="o">|</span> <span class="o">...</span>
      <span class="o">|</span> <span class="n">functype</span>
      <span class="o">|</span> <span class="n">methodtype</span>

    <span class="n">methodtype</span>
      <span class="o">=</span> <span class="nc">MethodSignature</span><span class="o">(</span><span class="n">functype</span> <span class="n">signature</span><span class="o">,</span>
                        <span class="kt">bool</span> <span class="n">is_staticmethod</span><span class="o">,</span>
                        <span class="kt">bool</span> <span class="n">is_classmethod</span><span class="o">,</span>
                        <span class="kt">bool</span> <span class="n">is_jit</span><span class="o">,</span> <span class="o">--</span> <span class="n">whether</span> <span class="n">this</span> <span class="n">is</span> <span class="n">a</span> <span class="n">jit</span> <span class="ow">or</span>
                                     <span class="o">--</span> <span class="n">autojit</span> <span class="k">method</span>
                       <span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Numba would construct this before starting any pipeline stage.</p>
</div>
</div>
<div class="section" id="untyped-ir-in-ssa-form">
<h3>Untyped IR in SSA form<a class="headerlink" href="#untyped-ir-in-ssa-form" title="Permalink to this headline">¶</a></h3>
<p>Untyped IR in SSA form would be constructed internally by numba during
and after the CFA pass and before type inference. This adds to the
<tt class="docutils literal"><span class="pre">initial</span></tt> schema control flow information such as:</p>
<div class="highlight-python"><pre>* SSA
* Stack variable stack allocation (non-ssa variables)
* Def-use and use-def chains</pre>
</div>
<p>The high-level CFG at this stage is gone, and we
have an untyped IR in SSA form (that is, it contains PhiNode AST nodes with uses
from variables of incoming blocks). It also has a reference to all live phis
in preorder according to the dominator tree in the <tt class="docutils literal"><span class="pre">FunctionDef</span></tt>.</p>
<p>Furthermore:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">ast.Name</span></tt> is rewritten to <tt class="docutils literal"><span class="pre">NameTarget</span></tt>, <tt class="docutils literal"><span class="pre">NameReference</span></tt> or <tt class="docutils literal"><span class="pre">NameParam</span></tt></li>
<li><tt class="docutils literal"><span class="pre">If</span></tt>, <tt class="docutils literal"><span class="pre">While</span></tt> and <tt class="docutils literal"><span class="pre">For</span></tt> lose the <tt class="docutils literal"><span class="pre">else</span></tt> clause</li>
<li>In-place assignments are normalized</li>
</ul>
</div></blockquote>
<div class="highlight-python"><pre>module untyped {

    function
      = FunctionDef(phi \all_phis, ...)

    phi
      = Phi(use* \incoming)

    def
      = NameTarget(posinfo pos, str id, use* \uses)
      | phi

    use
      = NameReference(posinfo pos, str id, nbtype type, def \def)
      | PhiRef(phi \def)

    lambda
      = Lambda(posinfo pos, funcmeta meta, str name, arguments args,
               expr body, cfg cfg)

    stmt
      = For(expr target,
            expr iter,
            stmt* body)
      | ...

}</pre>
</div>
</div>
<div class="section" id="typed-ir-in-ssa-form">
<h3>Typed IR in SSA form<a class="headerlink" href="#typed-ir-in-ssa-form" title="Permalink to this headline">¶</a></h3>
<p>The typed IR is similar to the untyped IR, except that every (sub-)expression
is annotated with a type.</p>
<p>Furthermore, the AST is augmented with
<tt class="docutils literal"><span class="pre">Promotion</span></tt> terms, which promote a variable for a merge in a subsequent
CFG block. E.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># y_0</span>
<span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="c"># block_if</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>           <span class="c"># y_1</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c"># block_else</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">3.0</span>         <span class="c"># y_2</span>
</pre></div>
</div>
<p>In the example above, <tt class="docutils literal"><span class="pre">block_if</span></tt> will contain a <tt class="docutils literal"><span class="pre">Promotion</span></tt> with a use
of <tt class="docutils literal"><span class="pre">y_1</span></tt>, replacing all uses of <tt class="docutils literal"><span class="pre">y_1</span></tt> with the promotion value (which
can only ever be a single phi node).</p>
<p>I.e. we rewrite <tt class="docutils literal"><span class="pre">y_1</span> <span class="pre">=</span> <span class="pre">2</span></tt> to <tt class="docutils literal"><span class="pre">[</span> <span class="pre">y_1</span> <span class="pre">=</span> <span class="pre">2</span> <span class="pre">;</span> <span class="pre">%0</span> <span class="pre">=</span> <span class="pre">Promote(y_1,</span> <span class="pre">float)</span> <span class="pre">]</span></tt> and
<tt class="docutils literal"><span class="pre">PhiNode(NameRef(y_1),</span> <span class="pre">NameRef(y_2))</span></tt> to <tt class="docutils literal"><span class="pre">PhiNode(%0,</span> <span class="pre">NameRef(y_2))</span></tt>.</p>
<p>All types adhere themselves to a schema, e.g.:</p>
<div class="highlight-python"><pre>type
  = Array(type dtype, int ndim)
  | Pointer(type base_type, int? size)
  | ...</pre>
</div>
<p>Since the schema specifies the interfaces of the different nodes, users
can supply their own node implementation (something we can do with the
type system). Hence user-written classes can be automatically
instantiated instead of generated ones. The code generator can still
emit code for serialization.</p>
</div>
</div>
<div class="section" id="low-level-portable-ir">
<h2>Low-level Portable IR<a class="headerlink" href="#low-level-portable-ir" title="Permalink to this headline">¶</a></h2>
<p>The low-level portable IR is a low-level, platform agnostic, IR that:</p>
<blockquote>
<div><ul class="simple">
<li>The IR contains only low-level, native types such as <tt class="docutils literal"><span class="pre">int_</span></tt>,
<tt class="docutils literal"><span class="pre">long_</span></tt>, pointers, structs, etc. The notion of high-level
concepts such as arrays or objects is gone.</li>
</ul>
</div></blockquote>
</div>
</div>


                </div>
              </div>
            </div>
          </div>
        </div>
        
        
      </div><!-- /row -->

      <!-- row -->
      <div class="row-fluid">
<div class="related navbar ">
  <div class="navbar-inner">
    <ul class="nav pull-right">
      
        <li><a href="../genindex.html" title="General Index" >index</a></li>
        <li><a href="../py-modindex.html" title="Python Module Index" >modules</a></li>
        <li><a href="reference.html" title="Numba Module Reference" >next</a></li>
        <li><a href="architecture.html" title="Numba Architecture" >previous</a></li>
        <li><a href="../index.html">numba 0.7.1-265-gf9fdf42-dirty documentation</a></li> 
      
    </ul>
  </div>
</div>
      </div><!-- /row -->

      <!-- footer -->
      <footer>
          &copy; Copyright 2012-2013, Continuum Analytics.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
      </footer>
      <!-- /footer -->

    </div>
    <!-- /container -->

  </body>
</html>